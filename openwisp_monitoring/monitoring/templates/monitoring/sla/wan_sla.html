{% load i18n %}

<h3>{% trans "WAN SLA" %}</h3>

{% if wan_sla and wan_sla.wan_results %}
  <p style="font-size: 12px; color: #4b5563;">
    <strong>{% trans "Mode" %}:</strong> {{ wan_sla.mode|upper }}
    {% if wan_sla.threshold %}
      &nbsp;|&nbsp;
      <strong>{% trans "Threshold" %}:</strong> {{ wan_sla.threshold }}%
    {% endif %}
    {% if wan_sla.start and wan_sla.end %}
      <br>
      <strong>{% trans "Window" %}:</strong>
      {{ wan_sla.start|date:"Y-m-d H:i" }}
      →
      {{ wan_sla.end|date:"Y-m-d H:i" }}
    {% endif %}
  </p>

  <table class="table" style="font-size: 12px;">
    <thead>
      <tr>
        <th>{% trans "WAN interface" %}</th>
        <th>{% trans "Current status" %}</th>
        <th>{% trans "Uptime %" %}</th>
        <th>{% trans "Threshold" %}</th>
        <th>{% trans "SLA" %}</th>
      </tr>
    </thead>
    <tbody>
      {% for w in wan_sla.wan_results %}
        <tr>
          <td>{{ w.label }}</td>
          <td>
            {% if w.is_up %}
              <span style="display:inline-block;padding:2px 6px;border-radius:999px;background:#ecfdf3;color:#166534;">
                {% trans "UP" %}
              </span>
            {% else %}
              <span style="display:inline-block;padding:2px 6px;border-radius:999px;background:#fef2f2;color:#b91c1c;">
                {% trans "DOWN" %}
              </span>
            {% endif %}
          </td>
          <td>
            {% if w.uptime_pct is not None %}
              {{ w.uptime_pct }}%
            {% else %}
              —
            {% endif %}
          </td>
          <td>
            {% if w.threshold is not None %}
              {{ w.threshold }}%
            {% else %}
              —
            {% endif %}
          </td>
          <td>
            {% if w.passed is None %}
              —
            {% elif w.passed %}
              <span style="color:#059669;font-weight:600;">✔ {% trans "PASS" %}</span>
            {% else %}
              <span style="color:#dc2626;font-weight:600;">✘ {% trans "FAIL" %}</span>
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p style="font-size: 12px; color: #6b7280;">
    {% trans "No WAN SLA data available for this device." %}
  </p>
{% endif %}
